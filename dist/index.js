(()=>{"use strict";var e={465:function(e,t,r){var o=this&&this.__createBinding||(Object.create?function(e,t,r,o){void 0===o&&(o=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,o,i)}:function(e,t,r,o){void 0===o&&(o=r),e[o]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||o(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(771),t),i(r(535),t),i(r(309),t),i(r(650),t),i(r(718),t)},309:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},650:(e,t)=>{function r(e,t,r=[0,1]){return Math.max(r[0],Math.min(r[1],null!=e?e:t))}function o(e){return.5*(1-Math.cos(e*Math.PI))}function i(e,t,r){const o=t/2,i=Math.abs(o-e),n=o*(1-r);if(i<n)return 1;let s=(i-n)/o/(1-n/o);return s=Math.min(1,Math.max(0,s)),1-function(e){return 3*Math.pow(e,2)-2*Math.pow(e,3)}(s)}Object.defineProperty(t,"__esModule",{value:!0}),t.generateNoise=void 0,t.generateNoise=function(e){var t;const{x:n,y:s,width:h,height:a,seed:l,params:d}=e,u=Math.round(31*r(d.frequencyChange,.3)+1),c=Math.round(14*(1-r(d.borderSmoothness,.5))+1),f=2-r(d.heightRedistribution,1,[.5,1.5]),g=r(d.falloff,0,[0,.9]),p=null===(t=d.heightAveraging)||void 0===t||t,v=l.length-1,m=n/h*u,y=s/a*u;let M,w,x,b,_,B=Math.floor(m),O=Math.floor(y),P=m-B,j=y-O,W=0,L=.5;for(let e=0;e<c;e++){let e=B+(O<<4);M=o(P),w=o(j),x=l[e&v],x+=M*(l[e+1&v]-x),b=l[e+16&v],b+=M*(l[e+16+1&v]-b),x+=w*(b-x),e+=256,b=l[e&v],b+=M*(l[e+1&v]-b),_=l[e+16&v],_+=M*(l[e+16+1&v]-_),b+=w*(_-b),W+=x*L,L*=.5,B<<=1,P*=2,P>=1&&(B++,P--),O<<=1,j*=2,j>=1&&(O++,j--)}return p&&(W>.5?W=Math.pow(W,(1.5-W)/1.1):W<.5&&(W=Math.pow(W,1.1*(1.5-W)))),W=Math.pow(W,f),g&&(W*=i(n,h,g)*i(s,a,g)),W}},718:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateSeed=void 0,t.generateSeed=function(e=512){const t=[];for(let r=0;r<e;r++)t.push(Math.random());return t}},910:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldBiome=void 0,t.WorldBiome=class{constructor(e,t){var r,o;this.lowerBound=Math.max(0,null!==(r=e.lowerBound)&&void 0!==r?r:0),this.upperBound=Math.min(1,null!==(o=e.upperBound)&&void 0!==o?o:1),this.data=t}}},771:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldGenerator=void 0;const o=r(650),i=r(718),n=r(535),s=r(481);t.WorldGenerator=class{constructor(e){this.layers=[],this.width=e.width,this.height=e.height}addLayer(e={}){const t=new s.WorldLayer(e);return this.layers.push(t),t}clearLayers(){this.layers=[]}getLayers(){return this.layers}generate(e){var t;const r=null!==(t=null==e?void 0:e.seed)&&void 0!==t?t:(0,i.generateSeed)(null==e?void 0:e.seedSize),o=[];for(const e of this.layers){const t=this.generateLayer(e,r);for(let e=0;e<this.height;e++){o[e]||(o[e]=[]);for(let r=0;r<this.width;r++)t[e][r]&&(o[e][r]=t[e][r].data)}}for(let e=0;e<this.height;e++)for(let t=0;t<this.width;t++)if(void 0===o[e][t])throw Error(`World matrix contains empty biome at [${t},${e}]`);return new n.World(o,r)}generateLayer(e,t){const r=[];for(let i=0;i<this.height;i++){r[i]=[];for(let n=0;n<this.width;n++){const s=(0,o.generateNoise)({params:e.params,seed:t,width:this.width,height:this.height,x:n,y:i}),h=e.getBiomeByHeight(s);h&&(r[i][n]=h)}}return r}}},481:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WorldLayer=void 0;const o=r(910);t.WorldLayer=class{constructor(e={}){this.biomes=[],this.params=e}addBiome(e,t){const r=new o.WorldBiome(e,t);return this.biomes.push(r),r}clearBiomes(){this.biomes=[]}getBiomes(){return this.biomes}getBiomeByHeight(e){return this.getBiomes().find((t=>e>=t.lowerBound&&e<=t.upperBound))}}},535:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.World=void 0,t.World=class{constructor(e,t){this.matrix=[],this.width=e[0].length,this.height=e.length,this.matrix=e,this.seed=t}getMatrix(){return this.matrix}each(e){for(let t=0;t<this.height;t++)for(let r=0;r<this.width;r++)if(!1===e({x:r,y:t},this.matrix[t][r]))return}getAt(e){var t,r;return null!==(r=null===(t=this.matrix[e.y])||void 0===t?void 0:t[e.x])&&void 0!==r?r:null}replaceAt(e,t){if(e.y>=this.height||e.x>=this.width)throw Error(`Position [${e.x},${e.y}] is out of world bounds`);this.matrix[e.y][e.x]=t}}}},t={},r=function r(o){var i=t[o];if(void 0!==i)return i.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}(465);module.exports=r})();